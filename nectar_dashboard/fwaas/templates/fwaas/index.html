{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "FWaaS" %}{% endblock %}

{% block page_header %}
  {% include "horizon/common/_page_header.html" with title=_("FWaaS") %}
{% endblock page_header %}

{% block main %}
<div class="row-fluid">
  <div class="span12">
    <div class="btn-group btn-group-lg" role="group">
      <button id="btn_launch" type="button" class="btn">Launch</button>
      <button id="btn_backup" type="button" class="btn">Backup</button>
      <button id="btn_recover" type="button" class="btn">Recover</button>
      <button id="btn_upgrade" type="button" class="btn">Upgrade</button>
    </div>
  </div>
</div>

<script>
function getCookie(name) {
  var cookieValue = null;
  if (document.cookie && document.cookie !== '') {
    var cookies = document.cookie.split(';');
    for (var i = 0; i < cookies.length; i++) {
      var cookie = jQuery.trim(cookies[i]);
      if (cookie.substring(0, name.length + 1) === (name + '=')) {
        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
        break;
      }
    }
  }
  return cookieValue;
}
function csrfSafeMethod(method) {
  return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
$.ajaxSetup({
  beforeSend: function(xhr, settings) {
    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
      xhr.setRequestHeader("X-CSRFToken", getCookie("csrftoken"));
    }
  }
});
$("#btn_launch").click(function(){
  $.post("launch/", function(data, status){
    alert("Data: " + data + "\nStatus: " + status);
  }).fail(function(jqXHR, textStatus, errorThrown){
    alert(textStatus + "\n" + errorThrown);
  });
});
$("#btn_backup").click(function(){
  $.post("backup/", function(data, status){
    alert("Data: " + data + "\nStatus: " + status);
  }).fail(function(jqXHR, textStatus, errorThrown){
    alert(textStatus + "\n" + errorThrown);
  });
});
$("#btn_recover").click(function(){
  $.post("recover/", function(data, status){
    alert("Data: " + data + "\nStatus: " + status);
  }).fail(function(jqXHR, textStatus, errorThrown){
    alert(textStatus + "\n" + errorThrown);
  });
});
$("#btn_upgrade").click(function(){
  $.post("upgrade/", function(data, status){
    alert("Data: " + data + "\nStatus: " + status);
  }).fail(function(jqXHR, textStatus, errorThrown){
    alert(textStatus + "\n" + errorThrown);
  });
});
</script>
{% endblock %}
